requires:
  - '@or-q/plugin-openrouter-api' # TODO: Migrate general openai conversation stuff from there and update this dependency
  - '@or-q/plugin-ollama'
  - '@or-q/plugin-store'
  - '@or-q/plugin-jp'

commands:
  - $defmacro:
      - $ollama-gpt-oss-instruct
      # TODO: This probably should run ollama-pull on the model
      - - info: $ollama-gpt-oss-instruct
        - info: System>
        - info: [[$arg: 1]]
        - info: User>
        - info: [[$arg: 2]]
        - conversation: gpt-oss:20b
        - temperature: 0
        - system: [[$arg: 1]]
        - user: [[$arg: 2]]
        - ollama
        - jp: 'choices[0].message.content'
        - unquote
